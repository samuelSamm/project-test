/*! Graphs - v1.0.0 - 2014-07-09
* https://github.com/KnowitLabs/Graphs
* Copyright (c) 2014 Andreas Norman; Licensed MIT */
var graphs={fontsize:20,fontfamily:"Arial",fontcolor:"#333333",colorsetname:"default",colorset:null,fontweight:"normal",init:function(){$(".canvasjs").length>0&&$(".canvasjs").each(function(){"IncompleteDonut"===$(this).data("graphtype")?graphs.drawIncompleteDonut($(this).attr("id"),$(this).data("value"),$(this).data("color")):($(".canvasjs-settings").length>0&&($colorset=$(".canvasjs-settings").data("colorset"),graphs.colorsetname=$(".canvasjs-settings").data("colorsetname"),graphs.createColorset($colorset),graphs.fontsize=$(".canvasjs-settings").data("fontsize"),graphs.fontfamily=$(".canvasjs-settings").data("fontfamily"),graphs.fontcolor=$(".canvasjs-settings").data("fontcolor"),graphs.fontweight=$(".canvasjs-settings").data("fontweight")),void 0!==$(this).attr("data-stats")?graphs.draw($(this).attr("id"),$(this).data("graphtype"),$(this).data("stats"),$(this).data("title")):graphs.drawAlternate($(this).attr("id"),$(this).data("graphtype"),$(this).data("title")))})},createColorset:function(a){$colors=a.split(","),$colorSetString=[],$.each($colors,function(a,b){$colorSetString.push(""+b)}),graphs.colorset=$colorSetString},drawAlternate:function(a,b,c){var d=[];$("#"+a).find("div.graphdata").each(function(){var a={label:$(this).data("label")};void 0!==$(this).attr("data-color")&&(a.color=$(this).data("color")),void 0!==$(this).attr("data-y")&&(a.y=$(this).data("y")),void 0!==$(this).attr("data-x")&&(a.x=$(this).data("x")),d.push(a)});var e=JSON.stringify(d);console.log(d),console.log(e),CanvasJS.addColorSet(graphs.colorsetname,graphs.colorset);var f=new CanvasJS.Chart(a,{backgroundColor:"transparent",colorSet:graphs.colorsetname,title:{text:c,fontSize:graphs.fontsize,fontFamily:graphs.fontfamily,fontColor:graphs.fontcolor,fontWeight:graphs.fontweight},data:[{type:b,startAngle:20,dataPoints:$.parseJSON(e)}]});f.render()},draw:function(a,b,c,d){$ajaxCall=$.ajax({url:c,dataType:"json"}),$ajaxCall.done(function(c){CanvasJS.addColorSet(graphs.colorsetname,graphs.colorset);var e=new CanvasJS.Chart(a,{backgroundColor:"transparent",colorSet:graphs.colorsetname,title:{text:d,fontSize:graphs.fontsize,fontFamily:graphs.fontfamily,fontColor:graphs.fontcolor,fontWeight:graphs.fontweight},data:[{type:b,startAngle:20,dataPoints:c}]});e.render()}),$ajaxCall.fail(function(){$("#graphid").html("Unable to draw graph. Msg: "+$ajaxCall.responseText)})},drawIncompleteDonut:function(a,b,c){var d=new CanvasJS.Chart(a,{backgroundColor:"transparent",toolTip:{enabled:!1},data:[{type:"doughnut",startAngle:90,dataPoints:[{y:b,indexLabel:null,color:c},{y:100-b,indexLabel:null,color:"transparent"}]}]});d.render(),$("#"+a+"-total").html(b+"%")}};